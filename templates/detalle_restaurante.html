{% extends "base.html" %}

{% block title %}{{ restaurante.nombre }} - RestauBook{% endblock %}

{% block content %}
<div class="animate-fade-in">
    <!-- Header -->
    <div class="mb-8">
        <a href="/" class="text-purple-600 hover:text-purple-800 font-semibold mb-4 inline-block transition">
            <i class="fas fa-arrow-left mr-2"></i>
            Volver al Inicio
        </a>
    </div>

    <!-- Información del Restaurante -->
    <div class="bg-white rounded-2xl shadow-xl overflow-hidden mb-8">
        <div class="h-64 gradient-bg flex items-center justify-center">
            <i class="fas fa-utensils text-white text-8xl"></i>
        </div>
        
        <div class="p-8">
            <div class="flex items-start justify-between mb-6">
                <div class="flex-1">
                    <h1 class="text-4xl font-bold text-gray-800 mb-3">{{ restaurante.nombre }}</h1>
                    <p class="text-lg text-gray-600 mb-4">
                        <i class="fas fa-map-marker-alt text-purple-600 mr-2"></i>
                        {{ restaurante.direccion or 'Dirección no disponible' }}
                    </p>
                    
                    {% if restaurante.descripcion %}
                    <div class="prose max-w-none">
                        <p class="text-gray-700 leading-relaxed">{{ restaurante.descripcion }}</p>
                    </div>
                    {% endif %}
                </div>

                {% if session.user_id %}
                <div class="ml-6">
                    <a href="/reserve?restaurant_id={{ restaurante.id }}" class="btn-primary text-white px-8 py-4 rounded-xl font-bold shadow-lg inline-block">
                        <i class="fas fa-calendar-check mr-2"></i>
                        Reservar Ahora
                    </a>
                </div>
                {% endif %}
            </div>

            <!-- Estadísticas -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 pt-6 border-t border-gray-200">
                <div class="text-center">
                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-chair text-purple-600 text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold text-gray-800 mb-1">{{ mesas|length }}</p>
                    <p class="text-sm text-gray-600">Mesas Disponibles</p>
                </div>

                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-users text-blue-600 text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold text-gray-800 mb-1">
                        {% set capacidad_total = mesas|sum(attribute='capacidad') %}
                        {{ capacidad_total }}
                    </p>
                    <p class="text-sm text-gray-600">Capacidad Total</p>
                </div>

                <div class="text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-clock text-green-600 text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold text-gray-800 mb-1">2h</p>
                    <p class="text-sm text-gray-600">Duración Reserva</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mesas Disponibles -->
    <div class="bg-white rounded-2xl shadow-xl p-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">
            <i class="fas fa-chair text-purple-600 mr-3"></i>
            Nuestras Mesas
        </h2>

        {% if mesas %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for mesa in mesas %}
            <div class="border-2 border-gray-200 rounded-xl p-6 text-center hover:border-purple-500 hover:shadow-lg transition">
                <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-chair text-purple-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">Mesa #{{ mesa.numero }}</h3>
                <p class="text-gray-600 mb-4">
                    <i class="fas fa-users text-purple-600 mr-2"></i>
                    Capacidad: {{ mesa.capacidad }} personas
                </p>
                <span class="inline-block px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-semibold">
                    <i class="fas fa-check-circle mr-1"></i>
                    Disponible
                </span>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-12">
            <i class="fas fa-inbox text-gray-300 text-6xl mb-4"></i>
            <h3 class="text-xl font-bold text-gray-700 mb-2">No hay mesas configuradas</h3>
            <p class="text-gray-600">Este restaurante aún no tiene mesas disponibles para reservar</p>
        </div>
        {% endif %}
    </div>

    <!-- Call to Action -->
    {% if session.user_id %}
    <div class="mt-12 gradient-bg rounded-2xl shadow-2xl p-12 text-center">
        <h2 class="text-3xl font-bold text-white mb-4">¿Listo para reservar?</h2>
        <p class="text-xl text-purple-100 mb-8 max-w-2xl mx-auto">
            Selecciona tu fecha preferida y asegura tu mesa en {{ restaurante.nombre }}
        </p>
        <a href="/reserve?restaurant_id={{ restaurante.id }}" class="inline-block bg-white text-purple-600 px-10 py-4 rounded-xl font-bold hover:bg-gray-100 transition shadow-lg hover:shadow-xl transform hover:scale-105">
            <i class="fas fa-calendar-plus mr-2"></i>
            Hacer Reserva Ahora
        </a>
    </div>
    {% else %}
    <div class="mt-12 gradient-bg rounded-2xl shadow-2xl p-12 text-center">
        <h2 class="text-3xl font-bold text-white mb-4">¿Te gusta este restaurante?</h2>
        <p class="text-xl text-purple-100 mb-8 max-w-2xl mx-auto">
            Crea una cuenta para poder hacer reservas en {{ restaurante.nombre }}
        </p>
        <div class="flex justify-center gap-4">
            <a href="/register" class="inline-block bg-white text-purple-600 px-10 py-4 rounded-xl font-bold hover:bg-gray-100 transition shadow-lg">
                <i class="fas fa-user-plus mr-2"></i>
                Registrarse
            </a>
            <a href="/login" class="inline-block bg-purple-800 bg-opacity-50 text-white px-10 py-4 rounded-xl font-bold hover:bg-opacity-70 transition">
                <i class="fas fa-sign-in-alt mr-2"></i>
                Iniciar Sesión
            </a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}